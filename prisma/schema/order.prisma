model Order {
    id              String      @id @default(uuid())
    customerId      String
    providerId      String
    status          OrderStatus @default(PLACED)
    totalAmount     Decimal     @db.Decimal(10, 2)
    deliveryAddress String

    customer User            @relation(fields: [customerId], references: [id])
    provider ProviderProfile @relation(fields: [providerId], references: [id])

    items OrderItem[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model OrderItem {
    id       String  @id @default(uuid())
    orderId  String
    mealId   String
    mealName String
    quantity Int
    price    Decimal @db.Decimal(10, 2)
    review   Review?

    order Order @relation(fields: [orderId], references: [id], onDelete: Cascade)
    meal  Meal  @relation(fields: [mealId], references: [id])

    @@index([orderId])
}

enum OrderStatus {
    PLACED
    PREPARING
    READY
    DELIVERED
    CANCELLED
}
